{"version":3,"sources":["audio-recorder.js"],"names":["AudioRecorder","constructor","options","this","Object","assign","onMessage","msg","type","console","log","onLoading","show","config","MAX_DURATION","MIN_DURATION","AUDIO_TYPE","FALLBACK_TYPE","UPDATE_INTERVAL","media","mediaRecorder","audioChunks","audioUrl","audioBlob","stream","audioElement","state","isRecording","isPaused","isPlaying","duration","currentTime","startTime","recordingTimer","playbackTimer","hasRecording","selectors","startBtn","stopBtn","playBtn","pauseBtn","clearBtn","uploadBtn","recordingSection","playerSection","statusText","recordingTime","totalTime","progressBar","progressHandle","progressContainer","init","bindEvents","resetState","$","on","startRecording","stopRecording","togglePlayback","pausePlayback","clearRecording","uploadRecording","bindProgressBarEvents","stopPlayback","cleanupMediaResources","updateUI","getTracks","forEach","track","stop","URL","revokeObjectURL","navigator","mediaDevices","getUserMedia","await","audio","mimeType","MediaRecorder","isTypeSupported","ondataavailable","event","data","size","push","onstop","processRecordedAudio","start","Date","now","startRecordingTimer","error","stopRecordingTimer","setInterval","updateTimeDisplay","clearInterval","Blob","createObjectURL","Audio","onended","stopPlaybackTimer","onloadedmetadata","isNaN","startPlayback","play","startPlaybackTimer","pause","updatePlaybackProgress","confirm","let","extension","includes","formData","FormData","append","toString","memberCenter","showProgress","result","uploadWithProgress","updateProgress","percent","hideProgress","success","accessUrl","insertAudioToEditor","message","toggle","slideDown","slideUp","text","addClass","removeClass","seconds","selector","min","Math","floor","sec","padStart","css","isDragging","handleSeek","e","document","preventDefault","container","offset","width","clientX","touches","left","time","max","seekTo","url","onProgress","Promise","resolve","reject","xhr","XMLHttpRequest","open","upload","onprogress","lengthComputable","round","loaded","total","onload","status","response","JSON","parse","responseText","Error","onerror","send","currentContent","editorEl","audioHtml","cherryInstance","getMarkdown","setMarkdown","getElementById","value"],"mappings":"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"}