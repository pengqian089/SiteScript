{"version":3,"sources":["audio-recorder.js"],"names":["AudioRecorder","constructor","options","this","Object","assign","onMessage","msg","type","console","log","onLoading","show","config","MAX_DURATION","MIN_DURATION","AUDIO_TYPE","FALLBACK_TYPE","UPDATE_INTERVAL","media","mediaRecorder","audioChunks","audioUrl","audioBlob","stream","audioElement","state","isRecording","isPaused","isPlaying","duration","currentTime","startTime","recordingTimer","playbackTimer","hasRecording","selectors","startBtn","stopBtn","playBtn","pauseBtn","clearBtn","uploadBtn","recordingSection","playerSection","statusText","recordingTime","totalTime","progressBar","progressHandle","progressContainer","init","bindEvents","resetState","$","on","startRecording","stopRecording","togglePlayback","pausePlayback","clearRecording","uploadRecording","bindProgressBarEvents","stopPlayback","cleanupMediaResources","updateUI","getTracks","forEach","track","stop","URL","revokeObjectURL","navigator","mediaDevices","getUserMedia","await","audio","mimeType","MediaRecorder","isTypeSupported","ondataavailable","event","data","size","push","onstop","processRecordedAudio","start","Date","now","startRecordingTimer","error","stopRecordingTimer","setInterval","updateTimeDisplay","clearInterval","Blob","createObjectURL","Audio","onended","stopPlaybackTimer","onloadedmetadata","isNaN","startPlayback","play","startPlaybackTimer","pause","updatePlaybackProgress","confirm","formData","FormData","content","append","val","Promise","resolve","setTimeout","pjax","url","container","message","toggle","slideDown","slideUp","text","addClass","removeClass","seconds","selector","min","Math","floor","sec","toString","padStart","percent","css","let","isDragging","handleSeek","e","document","preventDefault","offset","width","clientX","includes","touches","left","time","max","seekTo"],"mappings":"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"}